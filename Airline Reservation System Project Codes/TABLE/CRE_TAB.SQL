CREATE TABLE AIRBUS
(AIRBUSNO VARCHAR2(5) CONSTRAINT AIRBUS_AIRBUSNO_PK PRIMARY KEY,
FIRST_CAP NUMBER(3) NOT NULL,
BUS_CAP NUMBER(3) NOT NULL,
ECO_CAP NUMBER(3) NOT NULL,
FIRST_WL_CAP NUMBER(3),
BUS_WL_CAP NUMBER(3),
ECO_WL_CAP NUMBER(3));

CREATE TABLE ROUTE
(ROUTE_CODE CHAR(7) CONSTRAINT FARE_ROUTECODE_PK PRIMARY KEY,
ROUTE_DESC VARCHAR2(25) NOT NULL,
ORIGIN VARCHAR2(15) NOT NULL,
DESTINATION VARCHAR2(15) NOT NULL);

CREATE TABLE FARE
(ROUTE_CODE CHAR(7) CONSTRAINT FARE_ROUTECODE_FK REFERENCES ROUTE(ROUTE_CODE),
AIRBUSNO VARCHAR2(5) CONSTRAINT FARE_AIRBUSNO_FK REFERENCES AIRBUS(AIRBUSNO),
FIRST_FARE NUMBER(8) NOT NULL,
BUS_FARE NUMBER(8) NOT NULL,
ECO_FARE NUMBER(8) NOT NULL,
CONSTRAINT FARE_CPK PRIMARY KEY(ROUTE_CODE,AIRBUSNO));

CREATE TABLE FLIGHT_SCH
(FLIGHT_NO VARCHAR2(7) CONSTRAINT FLI_SCH_FLIGHT_NO_PK PRIMARY KEY,
AIRBUSNO VARCHAR2(5) NOT NULL CONSTRAINT FLI_SCH_AIRB_NO_FK REFERENCES AIRBUS(AIRBUSNO),
AIRBUS_NM VARCHAR2(20) NOT NULL,
ROUTE_CODE CHAR(7) NOT NULL CONSTRAINT FLI_SCH_ROUTECODE_FK REFERENCES ROUTE(ROUTE_CODE),
DEPRT_TIME CHAR(5) NOT NULL,
JOURNEY_HRS CHAR(5) NOT NULL,
FLIGHT_DAY1 NUMBER(1) NOT NULL,
FLIGHT_DAY2 NUMBER(1));

CREATE TABLE FLIGHT
(FLIGHT_NO VARCHAR2(7) NOT NULL CONSTRAINT FLI_FLI_NO_FK REFERENCES FLIGHT_SCH(FLIGHT_NO),
FLIGHT_DATE DATE ,
FIRST_SEATS_BK NUMBER(3),
BUS_SEATS_BK NUMBER(3),
ECO_SEATS_BK NUMBER(3));

CREATE TABLE SERVICE
(SS_CODE VARCHAR2(4) CONSTRAINT SERVICE_SSCODE_PK PRIMARY KEY,
SS_DESC VARCHAR2(15) NOT NULL,
SS_FARE NUMBER(5) NOT NULL);

CREATE TABLE BRANCH
(BRANCH_CODE VARCHAR2(4) CONSTRAINT BRANCH_BCODE_PK PRIMARY KEY,
ADD1 VARCHAR2(20) NOT NULL,
ADD2 VARCHAR2(20),
CITY VARCHAR2(15) NOT NULL,
TELEPHONE NUMBER(8));

CREATE TABLE RESERVATION
(PNR NUMBER(5) CONSTRAINT RESERVATION_PNR_PK PRIMARY KEY,
FLIGHT_NO VARCHAR2(7) NOT NULL CONSTRAINT RESERVATION_FNO_FK REFERENCES FLIGHT_SCH(FLIGHT_NO),
FLIGHT_DATE DATE,
CLASS CHAR NOT NULL CONSTRAINT RESERVATION_CLASS_CK CHECK(CLASS IN ('F','B','E')),
FLIGHT_TYPE CHAR NOT NULL CONSTRAINT RESERVATION_FTYPE_CK CHECK(FLIGHT_TYPE IN ('I','D')),
RESERV_DATE DATE NOT NULL,
ROUTE_CODE CHAR(7) NOT NULL CONSTRAINT RES_ROUTECODE_FK REFERENCES ROUTE(ROUTE_CODE),
PASS_NAME VARCHAR2(20) NOT NULL,
PASS_ADD VARCHAR2(100) NOT NULL,
PASSPORT_NO NUMBER(8) NOT NULL,
SS_CODE VARCHAR2(4) CONSTRAINT RESERVATION_SSCODE_FK REFERENCES SERVICE(SS_CODE),
PASS_STATUS VARCHAR2(15),
TOTAL_FARE NUMBER(8,2) NOT NULL,
BRANCH_CODE VARCHAR2(4) CONSTRAINT RESERVATION_BCODE_FK REFERENCES BRANCH(BRANCH_CODE),
TOT_FARE NUMBER(8,2) NOT NULL,
CANC_FLAG CHAR);

CREATE TABLE CANCELLATION
(PNR NUMBER(5) NOT NULL CONSTRAINT CANCELLATION_PNR_FK REFERENCES RESERVATION(PNR),
FLIGHT_NO VARCHAR2(7) NOT NULL CONSTRAINT CANCELLATION_FNO_FK REFERENCES FLIGHT_SCH(FLIGHT_NO),
FLIGHT_DATE DATE,
CLASS CHAR NOT NULL CONSTRAINT CANCELLATION_CLASS_CK CHECK(CLASS IN ('F','B','E')),
FLIGHT_TYPE CHAR NOT NULL CONSTRAINT CANCELLATION_FTYPE_CK CHECK(FLIGHT_TYPE IN ('I','D')),
RESERV_DATE DATE NOT NULL,
ROUTE_CODE CHAR(7) NOT NULL CONSTRAINT CAN_ROUTECODE_FK REFERENCES ROUTE(ROUTE_CODE),
PASS_NAME VARCHAR2(20) NOT NULL,
PASS_ADD VARCHAR2(100) NOT NULL,
PASSPORT_NO NUMBER(8) NOT NULL,
SS_CODE VARCHAR2(4) CONSTRAINT CANCELLATION_SSCODE_FK REFERENCES SERVICE(SS_CODE),
CANCEL_DATE DATE NOT NULL,
PASS_STATUS VARCHAR2(15),
TOTAL_FARE NUMBER(8,2) NOT NULL,
BRANCH_CODE VARCHAR2(4) CONSTRAINT CANCELLATION_BCODE_FK REFERENCES BRANCH(BRANCH_CODE),
TOT_FARE NUMBER(8,2) NOT NULL,
CANC_AMT NUMBER(8,2));

CREATE TABLE CONTROL
(AIR_TAX NUMBER(4) NOT NULL,
EXCESS_BG_LIMIT NUMBER(3) NOT NULL,
FIRST_BG_LIMIT NUMBER(3) NOT NULL,
BUS_BG_LIMIT NUMBER(3) NOT NULL,
ECO_BG_LIMIT NUMBER(3) NOT NULL,
CANC_DEDUC_12 NUMBER(3) NOT NULL,
CANC_DEDUC_6 NUMBER(3) NOT NULL,
CANC_DEDUC_3 NUMBER(3) NOT NULL);

CREATE TABLE LOGIN
(USER_ID VARCHAR2(15) CONSTRAINT SYS_PASS_USERID_PK PRIMARY KEY,
 PASSWORD VARCHAR2(15));